language: node_js
node_js:
- '6'
sudo: false
dist: trusty
env:
  - CXX=g++-4.8
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - gcc-4.8
    - g++-4.8
cache:
  directories:
  - node_modules
before_install:
- npm config set spin false
- npm install -g npm@4
- npm --version
- npm install -g greenkeeper-lockfile@1
- npm install -g codecov
install:
- npm install
script:
- sidekick run --ci
- npm run test
- codecov
before_script: greenkeeper-lockfile-update
after_script: greenkeeper-lockfile-upload
notifications:
  webhooks:
    urls:
    - https://webhook.atomist.com/travis
    on_success: always
    on_failure: always
    on_start: always
    on_cancel: always
    on_error: always
